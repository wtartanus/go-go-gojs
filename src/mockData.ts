export const nodeDataArray = [
    { key: 0, wife: 82, name: "George V", gender: "M", birthYear: "1865", deathYear: "1936", reign: "1910-1936", photo: "https://upload.wikimedia.org/wikipedia/commons/c/c7/Kinggeorgev1928.jpg"},
    { key: 82, name: "Maria Teck", gender: "F", birthYear: "1867", deathYear: "1953", husband: 0 },
    { key: 1, f: 0, m: 82, wife: 84, name: "Edward VIII", gender: "M", birthYear: "1894", deathYear: "1972", reign: "1936", photo: "https://upload.wikimedia.org/wikipedia/commons/5/51/Prince-Edward-Duke-of-Windsor-King-Edward-VIII.jpg" },
    { key: 84, name: "Wallis Simpson", gender: "F", husband: 1, birthYear: "1937", deathYear: "1972" },
    { key: 2, f: 0, m: 82, wife: 85, name: "George VI", gender: "M", birthYear: "1895", deathYear: "1952", reign: "1936-1952", photo: "https://upload.wikimedia.org/wikipedia/commons/7/73/Georg_VI_England.jpg" },
    { key: 85, name: "Elizabeth Bowes-Lyon", gender: "F", husband: 2, birthYear: "1900", deathYear: "2002"},
    { key: 7, f: 2, m: 85, husband: 86, name: "Elizabeth II", gender: "F", birthYear: "1926", reign: "1952-", photo: "https://upload.wikimedia.org/wikipedia/commons/5/50/Queen_Elizabeth_II_March_2015.jpg" },
    { key: 86, wife: 7, name: "Philip, Duke of Edinburgh", gender: "M", birthYear: "1921", deathYear: "2021" },
    { key: 16, m: 7, f: 86, wife: 87, name: "Charles, Prince of Wales", gender: "M", birthYear: "1948", photo: "https://upload.wikimedia.org/wikipedia/commons/e/e2/2019_Reuni%C3%A3o_Bilateral_com_o_Pr%C3%ADncipe_Charles_-_48948389972_%28cropped%29.jpg" },
    { key: 87, name: "Diana, Princess of Wales", husband: 16, birthYear: 1961, deathYear: 1997 },
    { key: 38, f: 16, m: 87, wife: 88, name: "Prince William", gender: "M", birthYear: "1982", photo: "https://upload.wikimedia.org/wikipedia/commons/f/fe/Prince_William%2C_Duke_of_Cambridge.jpg"},
    { key: 88, husband: 38, name: "Catherine, Duchess of Cambridge", gender: "F", birthYear: "1982" },
    { key: 39, f: 16, m: 87, wife: 89, name: "Prince Harry of Wales", gender: "M", birthYear: "1984", photo: "https://upload.wikimedia.org/wikipedia/commons/3/32/Lancering_Invictus_Games_2020-7_%28cropped%29.jpg" },
    { key: 89, husband: 39, name: "Meghan, Duchess of Sussex", gender: "F", birthYear: "1981" },
    { key: 17, m: 7, f: 86, husband: 90, name: "Anne, Princess Royal", gender: "F", birthYear: "1950", photo: "https://upload.wikimedia.org/wikipedia/commons/7/76/Princess_Anne_October_2015.jpg" },
    { key: 90, wife: 17, name: "Timothy Laurence", gender: "M", birthYear: "1955" },
    { key: 40, m: 17, f: 90, wife: 91, name: "Peter Phillips", gender: "M", birthYear: "1977" },
    { key: 91, husband: 40, name: "Autumn Phillips", gender: "F", birthYear: "1978" },
    { key: 83, m: 91, f: 40, name: "Savannah Phillips", gender: "F", birthYear: "2010" },
    { key: 92, wife: 41, name: "Mike Tindall", gender: "M", birthYear: "1978" },
    { key: 41, husband: 92, m: 17, f: 90, name: "Zara Phillips", gender: "F", birthYear: "1981", photo: "https://upload.wikimedia.org/wikipedia/commons/b/bf/Zara_Phillips_%282012%29.jpg" },
    { key: 18, wife: 93, m: 7, f: 86, name: "Prince Andrew", gender: "M", birthYear: "1960" },
    { key: 93, husband: 18, name: "Sarah, Duchess of York", gender: "F", birthYear: "1959" },
    { key: 42, f: 18, m: 93, name: "Princess Beatrice of York", gender: "F", birthYear: "1988" },
    { key: 43, f: 18, m: 93, name: "Princess Eugenie of York", gender: "F", birthYear: "1990" },
    { key: 19, m: 7, f: 86, wife: 94, name: "Prince Edward", gender: "M", birthYear: "1964" },
    { key: 94, husband: 19, name: "Sophie, Countess of Wessex", gender: "F", birthYear: "1965"},
    { key: 44, f: 19, m: 94, name: "Lady Louise Windsor", gender: "F", birthYear: "2003" },
    { key: 45, f: 19, m: 94, name: "James, Viscount Severn", gender: "M", birthYear: "2007" },
    { key: 8, f: 2, m: 85, husband: 95, name: "Princess Margaret", gender: "F", birthYear: "1930", deathYear: "2002" },
    { key: 95, wife: 8, name: "Antony Armstrong-Jones", gender: "M", birthYear: "1930", deathYear: "2017" },
    { key: 20, wife: 96, m: 8, f: 95, name: "David Armstrong-Jones", gender: "M", birthYear: "1961" },
    { key: 96, husband: 20, name: "Serena Armstrong-Jones", gender: "F", birthYear: "1970" },
    { key: 21, husband: 97, m: 8, f: 95, name: "Lady Sarah Chatto", gender: "F", birthYear: "1964" },
    { key: 97, wife: 21, name: "Daniel Chatto", gender: "M", birthYear: "1957" },
    { key: 46, m: 21, f: 97, name: "Samuel Chatto", gender: "M", birthYear: "1996" },
    { key: 47, m: 21, f: 97, name: "Arthur Chatto", gender: "M", birthYear: "1999" },
    { key: 3, husband: 98, f: 0, m: 82, name: "Mary, Princess Royal", gender: "F", birthYear: "1897", deathYear: "1965" },
    { key: 98, wife: 3, name: "Henry Lascelles", gender: "M", birthYear: "1882", deathYear: "1947" },
    { key: 9, m: 3, f: 98, name: "George Lascelles", gender: "M", birthYear: "1923", deathYear: "2011" },
];

const groupDataArray = [
    { key: -1, isGroup: true, headOfFamily: 7 },
    { key: -2, isGroup: true, headOfFamily: 8 },
    { key: -3, isGroup: true, headOfFamily: 9 },
];

const findFamily = (key: number) =>
    groupDataArray.find(({ headOfFamily }) => headOfFamily === key);

const findMember = (memberKey: number) =>
    nodeDataArray.find(({ key }) => key === memberKey);

const findClosestFamily = (key: number, checkedKeys: number[] = []): number => {
    if (key === undefined || checkedKeys.includes(key)) {
        return null;
    }

    checkedKeys.push(key);

    const member = findMember(key);

    return findFamily(key)?.key
        || findClosestFamily(member?.husband || member?.wife, checkedKeys)
        || findClosestFamily(member?.f, checkedKeys)
        || findClosestFamily(member?.m, checkedKeys)
};

export const nodeDataArrayWithGroups = [
    ...nodeDataArray.map((member) => {
        const familyMember = findClosestFamily(member.key);

        return familyMember ? { ...member, group: familyMember } : member;
    }),
    ...groupDataArray.map((group) => ({
        ...group,
        name: `Family of ${findMember(group.headOfFamily).name}`
    }))
];
